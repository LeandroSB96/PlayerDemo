# GuÃ­a de Deploy en Render

## ğŸ“‹ Requisitos Previos

1. **Cuenta en Render** - https://render.com
2. **GitHub** - Repositorio actualizado con los cambios
3. **Credenciales de Spotify**:
   - `SPOTIFY_CLIENT_ID`
   - `SPOTIFY_CLIENT_SECRET`
   - ObtÃ©n estas en https://developer.spotify.com/dashboard

---

## ğŸš€ Pasos para Deployar

### 1. Prepara tu Repositorio

Sube todos tus cambios a GitHub:

```bash
git add .
git commit -m "Deploy to Render: agregado render.yaml"
git push origin master
```

### 2. Conecta con Render

1. Abre https://render.com y logueate con GitHub
2. Haz click en **"+ New"** en el dashboard
3. Selecciona **"Web Service"**
4. Conecta tu repositorio de GitHub (`PlayerDemo`)

### 3. Configura el Servicio

Usa estos valores:

| Campo | Valor |
|-------|-------|
| **Name** | `playerdemo` |
| **Runtime** | Node |
| **Build Command** | `npm install && cd server && npm install` |
| **Start Command** | `node server/server.js` |
| **Plan** | Free (o Paid si quieres mejor performance) |

### 4. Agregar Variables de Entorno

En la secciÃ³n **"Environment"**, agrega:

```
SPOTIFY_CLIENT_ID = tu_client_id
SPOTIFY_CLIENT_SECRET = tu_client_secret
NODE_ENV = production
```

### 5. Deploy

Haz click en **"Create Web Service"** y listo. Render comenzarÃ¡ a deployar automÃ¡ticamente.

---

## ğŸ“ URLs DespuÃ©s del Deploy

Una vez deployed, tu app estarÃ¡ en:
```
https://playerdemo.onrender.com
```

Y el proxy de Spotify en:
```
https://playerdemo.onrender.com/spotify-token
```

---

## âœ… Verificar que Funcione

1. Abre tu URL en el navegador
2. Prueba buscar un artista
3. Verifica la consola (F12) para errores
4. Si dice "Cannot GET /spotify-token", el backend estÃ¡ correcto

---

## ğŸ”§ SoluciÃ³n de Problemas

### La app se ve en blanco

**SoluciÃ³n:**
- Abre la consola (F12)
- Verifica que no haya errores de CORS
- Comprueba que `SPOTIFY_CLIENT_ID` y `SPOTIFY_CLIENT_SECRET` estÃ©n bien configurados

### Error: "Cannot GET /spotify-token"

**Esto es NORMAL**, significa que el backend estÃ¡ funcionando correctamente.

### Errores de Spotify en la consola

**SoluciÃ³n:**
1. Verifica que tus credenciales de Spotify sean correctas
2. AsegÃºrate de que tu app estÃ© registrada en https://developer.spotify.com/dashboard
3. El User-Agent puede estar siendo rechazado (raro, pero posible)

### La app no carga datos

**SoluciÃ³n:**
1. Espera 1-2 minutos despuÃ©s del deploy (Render puede ser lento)
2. Haz un hard refresh (Ctrl+Shift+R)
3. Verifica en Render logs si hay errores (en el dashboard de Render)

---

## ğŸ“Š Logs en Render

Para ver quÃ© estÃ¡ pasando:

1. Ve a tu servicio en Render
2. Haz click en la pestaÃ±a **"Logs"**
3. VerÃ¡s la salida del servidor en tiempo real

---

## ğŸ’¡ Tips para Production

- **CachÃ© agresivo**: Render cachea tu app, a veces tarda en actualizar
- **Deployments fallidos**: Si falla, revisa los logs en Render
- **Inactividad**: Con el plan Free, la app se "duerme" tras 15 min sin usar
- **LÃ­mites**: El plan Free tiene 750 horas/mes, es bastante

---

## ğŸ”„ Updates Posteriores

Cada vez que pushes a `master` en GitHub, Render se auto-deploya automÃ¡ticamente.

```bash
git add .
git commit -m "Fix: algo"
git push origin master
# Render auto-deploya en 2-3 minutos
```

---

## â“ Preguntas Frecuentes

**P: Â¿Necesito pagar?**
R: No, el plan Free funciona bien. Solo te cuesta si quieres mejor performance o custom domain.

**P: Â¿Se borran los datos?**
R: La app es stateless, todo viene de Spotify. No hay base de datos.

**P: Â¿CÃ³mo cambio credenciales de Spotify despuÃ©s?**
R: En Render â†’ Settings â†’ Environment â†’ Edita las variables â†’ Deploy automÃ¡tico.

**P: Â¿Puedo usar otro dominio?**
R: SÃ­, en Render â†’ Settings â†’ Custom Domain

---

Â¡Listo! Tu app estarÃ¡ online en minutos. ğŸµ
